{% extends 'base.html.twig' %}

{% block title %}Espaces - ZANDO Market{% endblock %}
{% block header %}Gestion des Espaces{% endblock %}
{% block subtitle %}Gérez les espaces disponibles dans votre marché{% endblock %}

{% block content %}
<div class="mb-4 flex justify-between items-center">
    <div>
        <a href="{{ path('market_admin_spaces_new') }}" class="px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium">
            <i class="fas fa-plus mr-2"></i>Nouvel Espace
        </a>
    </div>
</div>

<div class="bg-white rounded-lg shadow-sm overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Code</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Catégorie</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Zone</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Statut</th>
                <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase">Actions</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for space in spaces %}
            <tr class="hover:bg-gray-50">
                <td class="px-4 py-3 text-sm font-medium text-gray-900">
                    {{ space.code }}
                </td>
                <td class="px-4 py-3 text-sm text-gray-900">
                    {{ space.spaceCategory.name }}
                </td>
                <td class="px-4 py-3 text-sm text-gray-500">
                    {{ space.zone }}
                </td>
                <td class="px-4 py-3 text-sm">
                    {% if space.status.value == 'available' %}
                        <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
                            <i class="fas fa-check-circle mr-1"></i>Disponible
                        </span>
                    {% elseif space.status.value == 'occupied' %}
                        <span class="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">
                            <i class="fas fa-user mr-1"></i>Occupé
                        </span>
                    {% elseif space.status.value == 'maintenance' %}
                        <span class="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">
                            <i class="fas fa-tools mr-1"></i>Maintenance
                        </span>
                    {% endif %}
                </td>
                <td class="px-4 py-3 text-sm text-right space-x-2">
                    <a href="{{ path('market_admin_spaces_edit', {id: space.id|bin2hex}) }}" 
                       class="text-purple-600 hover:text-purple-900 font-medium">
                        <i class="fas fa-edit mr-1"></i>Modifier
                    </a>
                    <button onclick="if(confirm('Êtes-vous sûr de vouloir supprimer cet espace ?')) { document.getElementById('delete-form-{{ space.id|bin2hex }}').submit(); }"
                            class="text-red-600 hover:text-red-900 font-medium">
                        <i class="fas fa-trash mr-1"></i>Supprimer
                    </button>
                    <form id="delete-form-{{ space.id|bin2hex }}" 
                          action="{{ path('market_admin_spaces_delete', {id: space.id|bin2hex}) }}" 
                          method="post" class="hidden">
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                    <i class="fas fa-inbox text-4xl mb-2"></i>
                    <p>Aucun espace trouvé</p>
                    <a href="{{ path('market_admin_spaces_new') }}" class="text-purple-600 hover:text-purple-800 font-medium mt-2 inline-block">
                        Créer le premier espace
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
